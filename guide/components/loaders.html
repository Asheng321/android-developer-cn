<!DOCTYPE html>












































































<html>
<head>


<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width" />

<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico" />
<title>加载器 | 安卓开发者</title><!-- STYLESHEETS --><!-- JAVASCRIPT -->


<link rel="stylesheet"
href="http://fonts.googleapis.com/css?family=Roboto:regular,medium,thin,italic,mediumitalic,bold" title="roboto">
<link href="../../assets/css/default.css" rel="stylesheet" type="text/css">




<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script src="../../assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "../../";
  var devsite = false;
</script>
<script src="../../assets/js/docs.js" type="text/javascript"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5831155-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="gc-documentation 
  develop guide" itemscope itemtype="http://schema.org/Article"><!-- Header -->

<a name="top"></a>

    
    <div id="header">
        <div class="wrap" id="header-wrap">
          <div class="col-3 logo">
          <a href="../../index.html">
            <img src="../../assets/images/dac_logo.png" width="123" height="25" alt="Android Developers" />
          </a>
          <div class="btn-quicknav" id="btn-quicknav">
          	<a href="#" class="arrow-inactive">Quicknav</a>
			      <a href="#" class="arrow-active">Quicknav</a>
          </div>
          </div>
            <ul class="nav-x col-9">
                <li class="design">
                  <a href="../../design/index.html"
                  zh-tw-lang="設計"
                  zh-cn-lang="设计"
                  ru-lang="Проектирование"
                  ko-lang="디자인"
                  ja-lang="設計"
                  es-lang="Diseñar"               
                  >设计</a></li>
                <li class="develop"><a href="../../develop/index.html"
                  zh-tw-lang="開發"
                  zh-cn-lang="开发"
                  ru-lang="Разработка"
                  ko-lang="개발"
                  ja-lang="開発"
                  es-lang="Desarrollar"               
                  >开发</a></li>
                <li class="distribute last"><a href="../../distribute/index.html"
                  zh-tw-lang="發佈"
                  zh-cn-lang="分发"
                  ru-lang="Распространение"
                  ko-lang="배포"
                  ja-lang="配布"
                  es-lang="Distribuir"               
                  >分发</a></li>
            </ul><!-- New Search -->
            
            
            <div class="menu-container">
            <div class="moremenu">
    <div id="more-btn"></div>
  </div>
  <div class="morehover" id="moremenu">
    <div class="top"></div>
    <div class="mid">
      <div class="header">Links</div>
      <ul>
        <li><a href="https://play.google.com/apps/publish/">Google Play Developer Console</a></li>
        <li><a href="http://android-developers.blogspot.com/">Android Developers Blog</a></li>
        <li><a href="../../about/index.html">About Android</a></li>
      </ul>
      <div class="header">Android Sites</div>
      <ul>
        <li><a href="http://www.android.com">Android.com</a></li>
        <li class="active"><a>Android Developers</a></li>
        <li><a href="http://source.android.com">Android Open Source Project</a></li>
      </ul>
      
      
      
      


      <br class="clearfix" />
    </div>
    <div class="bottom"></div>
  </div>
  <div class="search" id="search-container">
    <div class="search-inner">
      <div id="search-btn"></div>
      <div class="left"></div>
      <form onsubmit="return submit_search()">
        <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q"
onfocus="search_focus_changed(this, true)" onblur="search_focus_changed(this, false)"
onkeydown="return search_changed(event, true, '../../')" 
onkeyup="return search_changed(event, false, '../../')" />
      </form>
      <div class="right"></div>
        <a class="close hide">close</a>
        <div class="left"></div>
        <div class="right"></div>
    </div>
  </div>

  <div class="search_filtered_wrapper reference">
    <div class="suggest-card reference no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>

  <div class="search_filtered_wrapper docs">
    <div class="suggest-card dummy no-display">&nbsp;</div>
    <div class="suggest-card develop no-display">
      <ul class="search_filtered">
      </ul>
      <div class="child-card guides no-display">
      </div>
      <div class="child-card training no-display">
      </div>
    </div>
    <div class="suggest-card design no-display">
      <ul class="search_filtered">
      </ul>
    </div>
    <div class="suggest-card distribute no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>

  </div><!-- /New Search>
          
          
          <!-- Expanded quicknav -->
  
           <div id="quicknav" class="col-9">
                <ul>
                    <li class="design">
                      <ul>
                        <li><a href="../../design/index.html">入门</a></li>
                        <li><a href="../../design/style/index.html">样式</a></li>
                        <li><a href="../../design/patterns/index.html">设计模式</a></li>
                        <li><a href="../../design/building-blocks/index.html">构造块</a></li>
                        <li><a href="../../design/downloads/index.html">下载</a></li>
                        <li><a href="../../design/videos/index.html">视频</a></li>
                      </ul>
                    </li>
                    <li class="develop">
                      <ul>
                        <li><a href="../../training/index.html"
                          zh-tw-lang="訓練課程"
                          zh-cn-lang="培训"
                          ru-lang="Курсы"
                          ko-lang="교육"
                          ja-lang="トレーニング"
                          es-lang="Capacitación"               
                          >训练课程</a></li>
                        <li><a href="../../guide/components/index.html"
                          zh-tw-lang="API 指南"
                          zh-cn-lang="API 指南"
                          ru-lang="Руководства по API"
                          ko-lang="API 가이드"
                          ja-lang="API ガイド"
                          es-lang="Guías de la API"               
                          >API 指南</a></li>
                        <li><a href="../../reference/packages.html"
                          zh-tw-lang="參考資源"
                          zh-cn-lang="参考"
                          ru-lang="Справочник"
                          ko-lang="참조문서"
                          ja-lang="リファレンス"
                          es-lang="Referencia"               
                          >参考资源</a></li>
                        <li><a href="../../tools/index.html"
                          zh-tw-lang="相關工具"
                          zh-cn-lang="工具"
                          ru-lang="Инструменты"
                          ko-lang="도구"
                          ja-lang="ツール"
                          es-lang="Herramientas"               
                          >开发工具</a>
                          <ul><li><a href="../../sdk/index.html">获取 SDK</a></li></ul>
                        </li>
                        <li><a href="../../google/index.html">Google 服务</a>
                        </li>
                        
                      </ul>
                    </li>
                    <li class="distribute last">
                      <ul>
                        <li><a href="../../distribute/index.html">Google Play 市场</a></li>
                        <li><a href="../../distribute/googleplay/publish/index.html">应用发布</a></li>
                        <li><a href="../../distribute/googleplay/promote/index.html">应用推广</a></li>
                        <li><a href="../../distribute/googleplay/quality/index.html">应用质量</a></li>
                        <li><a href="../../distribute/googleplay/spotlight/index.html">精品聚焦</a></li>
                        <li><a href="../../distribute/open.html">开放发行</a></li>
                      </ul>
                    </li>
                </ul>
          </div><!-- /Expanded quicknav -->
          
        </div>
    </div><!-- /Header -->
    
    
    
  <div id="searchResults" class="wrap" style="display:none;">
          <h2 id="searchTitle">Results</h2>
          <div id="leftSearchControl" class="search-control">Loading...</div>
  </div><!-- Secondary x-nav -->
    
    
  
    
    <div id="nav-x">
        <div class="wrap">
            <ul class="nav-x col-9 develop" style="width:100%">
                <li class="training"><a href="../../training/index.html"
                  zh-tw-lang="訓練課程"
                  zh-cn-lang="培训"
                  ru-lang="Курсы"
                  ko-lang="교육"
                  ja-lang="トレーニング"
                  es-lang="Capacitación"               
                  >训练课程</a></li>
                <li class="guide"><a href="../../guide/components/index.html"
                  zh-tw-lang="API 指南"
                  zh-cn-lang="API 指南"
                  ru-lang="Руководства по API"
                  ko-lang="API 가이드"
                  ja-lang="API ガイド"
                  es-lang="Guías de la API"               
                  >API 指南</a></li>
                <li class="reference"><a href="../../reference/packages.html"
                  zh-tw-lang="參考資源"
                  zh-cn-lang="参考"
                  ru-lang="Справочник"
                  ko-lang="참조문서"
                  ja-lang="リファレンス"
                  es-lang="Referencia"               
                  >参考资源</a></li>
                <li class="tools"><a href="../../tools/index.html"
                  zh-tw-lang="相關工具"
                  zh-cn-lang="工具"
                  ru-lang="Инструменты"
                  ko-lang="도구"
                  ja-lang="ツール"
                  es-lang="Herramientas"
                  >开发工具</a></li>
                <li class="google"><a href="../../google/index.html"
                  >Google 服务</a>
                </li>
                
            </ul>
        </div>
        
    </div><!-- /Sendondary x-nav -->
    
  




  

  <div class="wrap clearfix" id="body-content">
    <div class="col-4" id="side-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
      <div id="devdoc-nav" class="scroll-pane">
<a class="totop" href="#top" data-g-event="left-nav-top">to top</a>



<ul id="nav"><!--  Walkthrough for Developers -- quick overview of what it's like to develop on Android --><!--<li style="color:red">Overview</li> -->
  
  

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../guide/components/index.html">
        <span class="en">应用组件</span>
      </a></div>
    <ul>
      <li><a href="../../guide/components/fundamentals.html">
            <span class="en">应用基本知识</span></a>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/components/activities.html">
            <span class="en">活动</span>
          </a></div>
        <ul>
          <li><a href="../../guide/components/fragments.html">
              <span class="en">活动片段</span>
            </a></li>
          <li><a href="../../guide/components/loaders.html">
              <span class="en">加载器</span>
            </a></li>
          <li><a href="../../guide/components/tasks-and-back-stack.html">
              <span class="en">任务和活动堆栈</span>
            </a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/components/services.html">
            <span class="en">服务</span>
          </a></div>
        <ul>
          <li><a href="../../guide/components/bound-services.html">
              <span class="en">绑定服务</span>
            </a></li>
          <li><a href="../../guide/components/aidl.html">
              <span class="en">AIDL</span>
            </a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/providers/content-providers.html">
            <span class="en">内容提供商</span>
          </a></div>
        <ul>
          <li><a href="../../guide/topics/providers/content-provider-basics.html">
              <span class="en">内容提供商基础</span>
            </a></li>
          <li><a href="../../guide/topics/providers/content-provider-creating.html">
              <span class="en">创建一个内容提供商</span>
            </a></li>
          <li><a href="../../guide/topics/providers/calendar-provider.html">
              <span class="en">日历提供商</span>
            </a></li>
          <li><a href="../../guide/topics/providers/contacts-provider.html">
              <span class="en">联系人提供商</span>
            </a></li>
          <li><a href="../../guide/topics/providers/document-provider.html">
              <span class="en">存储访问框架</span>
            </a></li>
        </ul>
      </li>
      <li><a href="../../guide/components/intents-filters.html">
          <span class="en">意图与意图过滤器</span>
        </a></li>
      <li><a href="../../guide/components/processes-and-threads.html">
          <span class="en">进程和线程</span>
        </a>
      </li>
      <li><a href="../../guide/topics/security/permissions.html">
          <span class="en">权限</span>
        </a>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/appwidgets/index.html">
            <span class="en">应用小部件</span>
          </a></div>
        <ul>
          <li><a href="../../guide/topics/appwidgets/host.html">
              <span class="en">应用小部件托管</span>
            </a></li>
        </ul>
      </li>
      <li class="nav-section">
      <div class="nav-section-header"><a href="../../guide/topics/manifest/manifest-intro.html">
          <span class="en">安卓项目清单</span>
        </a></div>
        <ul>
          <li><a href="../../guide/topics/manifest/action-element.html">&lt;action&gt;</a></li>
          <li><a href="../../guide/topics/manifest/activity-element.html">&lt;activity&gt;</a></li>
          <li><a href="../../guide/topics/manifest/activity-alias-element.html">&lt;activity-alias&gt;</a></li>
          <li><a href="../../guide/topics/manifest/application-element.html">&lt;application&gt;</a></li>
          <li><a href="../../guide/topics/manifest/category-element.html">&lt;category&gt;</a></li>
          <li><a href="../../guide/topics/manifest/compatible-screens-element.html">&lt;compatible-screens&gt;</a></li>
          <li><a href="../../guide/topics/manifest/data-element.html">&lt;data&gt;</a></li>
          <li><a href="../../guide/topics/manifest/grant-uri-permission-element.html">&lt;grant-uri-permission&gt;</a></li>
          <li><a href="../../guide/topics/manifest/instrumentation-element.html">&lt;instrumentation&gt;</a></li>
          <li><a href="../../guide/topics/manifest/intent-filter-element.html">&lt;intent-filter&gt;</a></li>
          <li><a href="../../guide/topics/manifest/manifest-element.html">&lt;manifest&gt;</a></li>
          <li><a href="../../guide/topics/manifest/meta-data-element.html">&lt;meta-data&gt;</a></li>
          <li><a href="../../guide/topics/manifest/path-permission-element.html">&lt;path-permission&gt;</a></li>
          <li><a href="../../guide/topics/manifest/permission-element.html">&lt;permission&gt;</a></li>
          <li><a href="../../guide/topics/manifest/permission-group-element.html">&lt;permission-group&gt;</a></li>
          <li><a href="../../guide/topics/manifest/permission-tree-element.html">&lt;permission-tree&gt;</a></li>
          <li><a href="../../guide/topics/manifest/provider-element.html">&lt;provider&gt;</a></li>
          <li><a href="../../guide/topics/manifest/receiver-element.html">&lt;receiver&gt;</a></li>
          <li><a href="../../guide/topics/manifest/service-element.html">&lt;service&gt;</a></li>
          <li><a href="../../guide/topics/manifest/supports-gl-texture-element.html">&lt;supports-gl-texture&gt;</a></li>
          <li><a href="../../guide/topics/manifest/supports-screens-element.html">&lt;supports-screens&gt;</a></li><!-- ##api level 4## -->
          <li><a href="../../guide/topics/manifest/uses-configuration-element.html">&lt;uses-configuration&gt;</a></li>
          <li><a href="../../guide/topics/manifest/uses-feature-element.html">&lt;uses-feature&gt;</a></li><!-- ##api level 4## --> 
          <li><a href="../../guide/topics/manifest/uses-library-element.html">&lt;uses-library&gt;</a></li>
          <li><a href="../../guide/topics/manifest/uses-permission-element.html">&lt;uses-permission&gt;</a></li>
          <li><a href="../../guide/topics/manifest/uses-sdk-element.html">&lt;uses-sdk&gt;</a></li>
        </ul>
   </li><!-- end of the manifest file -->

    </ul>
  </li>

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../guide/topics/ui/index.html">
        <span class="en">用户界面</span>
      </a></div>
    <ul>
      <li><a href="../../guide/topics/ui/overview.html">
          <span class="en">概述</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/ui/declaring-layout.html">
            <span class="en">布局</span>
          </a></div>
        <ul>
          <li><a href="../../guide/topics/ui/layout/linear.html">
              <span class="en">线性布局</span>
            </a></li>
          <li><a href="../../guide/topics/ui/layout/relative.html">
              <span class="en">相对布局</span>
            </a></li><!--
          <li><a href="../../guide/topics/ui/layout/grid.html">
              <span class="en">Grid Layout</span>
            </a></li>
       -->
       
          <li><a href="../../guide/topics/ui/layout/listview.html">
              <span class="en">列表视图</span>
            </a></li>
          <li><a href="../../guide/topics/ui/layout/gridview.html">
              <span class="en">网格视图</span>
            </a></li>
        </ul>
      </li>

      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/ui/controls.html">
            <span class="en">输入控件</span>
          </a></div>
        <ul>
          <li><a href="../../guide/topics/ui/controls/button.html">
              <span class="en">按钮</span>
            </a></li>
          <li><a href="../../guide/topics/ui/controls/text.html">
              <span class="en">文本框</span>
            </a></li>
          <li><a href="../../guide/topics/ui/controls/checkbox.html">
              <span class="en">复选框</span>
            </a></li>
          <li><a href="../../guide/topics/ui/controls/radiobutton.html">
              <span class="en">单选按钮</span>
            </a></li>
          <li><a href="../../guide/topics/ui/controls/togglebutton.html">
              <span class="en">切换按钮</span>
            </a></li>
          <li><a href="../../guide/topics/ui/controls/spinner.html">
              <span class="en">下拉列表</span>
            </a></li>
          <li><a href="../../guide/topics/ui/controls/pickers.html">
              <span class="en">选择器</span>
            </a></li><!--
          <li><a href="../../guide/topics/ui/controls/progress.html">
              <span class="en">Seek and Progress Bars</span>
            </a></li>
-->

        </ul>
      </li>
      <li><a href="../../guide/topics/ui/ui-events.html">
          <span class="en">输入事件</span>
        </a></li>
      <li><a href="../../guide/topics/ui/menus.html">
          <span class="en">菜单</span></span>
          </a></li>
      <li><a href="../../guide/topics/ui/actionbar.html">
           <span class="en">操作栏</span>
          </a></li>
      <li><a href="../../guide/topics/ui/settings.html">
            <span class="en">设置</span>
          </a></li>
      <li><a href="../../guide/topics/ui/dialogs.html">
           <span class="en">对话框</span>
          </a></li>
      <li><a href="../../guide/topics/ui/notifiers/notifications.html">
          <span class="en">通知</span>
        </a></li>
      <li><a href="../../guide/topics/ui/notifiers/toasts.html">
          <span class="en">提醒框</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/search/index.html">
            <span class="en">搜索</span>
          </a></div>
          <ul>
            <li><a href="../../guide/topics/search/search-dialog.html">创建一个搜索界面</a></li>
            <li><a href="../../guide/topics/search/adding-recent-query-suggestions.html">添加最近查询建议</a></li>
            <li><a href="../../guide/topics/search/adding-custom-suggestions.html">添加自定义建议</a></li>
            <li><a href="../../guide/topics/search/searchable-config.html">可搜索配置</a></li>
          </ul>
      </li>
      <li><a href="../../guide/topics/ui/drag-drop.html">
          <span class="en">拖放</span>
        </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/ui/accessibility/index.html">
            <span class="en">辅助功能</span>
          </a></div>
        <ul>
          <li><a href="../../guide/topics/ui/accessibility/apps.html">
              <span class="en">让应用可访问</span>
            </a></li>
          <li><a href="../../guide/topics/ui/accessibility/checklist.html">
              <span class="en">辅助功能开发者清单</span>
            </a></li>
          <li><a href="../../guide/topics/ui/accessibility/services.html">
              <span class="en">构建辅助功能服务</span>
            </a></li>
        </ul>
      </li>
      <li><a href="../../guide/topics/ui/themes.html">
          <span class="en">样式与主题</span>
        </a></li>
      <li><a href="../../guide/topics/ui/custom-components.html">
          <span class="en">自定义组件</span>
        </a></li>
    </ul>
  </li><!-- end of User Interface -->

    <li class="nav-section">
      <div class="nav-section-header"><a href="../../guide/topics/resources/index.html">
           <span class="en">应用资源</span>
         </a></div>
      <ul>
        <li><a href="../../guide/topics/resources/overview.html">
            <span class="en">概述</span>
          </a></li>
          <li><a href="../../guide/topics/resources/providing-resources.html">
            <span class="en">提供资源</span>
          </a></li>
        <li><a href="../../guide/topics/resources/accessing-resources.html">
            <span class="en">访问资源</span>
          </a></li>
        <li><a href="../../guide/topics/resources/runtime-changes.html">
              <span class="en">处理运行时更改</span>
            </a></li>
        <li><a href="../../guide/topics/resources/localization.html">
            <span class="en">本地化</span>
          </a></li>
        <li class="nav-section">
          <div class="nav-section-header"><a href="../../guide/topics/resources/available-resources.html">
              <span class="en">资源类型</span>
            </a></div>
          <ul>
            <li><a href="../../guide/topics/resources/animation-resource.html">动画</a></li>
            <li><a href="../../guide/topics/resources/color-list-resource.html">颜色状态列表</a></li>
            <li><a href="../../guide/topics/resources/drawable-resource.html">可描绘资源</a></li>
            <li><a href="../../guide/topics/resources/layout-resource.html">布局</a></li>
            <li><a href="../../guide/topics/resources/menu-resource.html">菜单</a></li>
            <li><a href="../../guide/topics/resources/string-resource.html">字符串</a></li>
            <li><a href="../../guide/topics/resources/style-resource.html">样式</a></li>
            <li><a href="../../guide/topics/resources/more-resources.html">更多类型</a></li>
          </ul>
        </li><!-- end of resource types -->
      </ul>
    </li><!-- end of app resources -->

   <li class="nav-section">
      <div class="nav-section-header"><a href="../../guide/topics/graphics/index.html">
          <span class="en">动画与图形</span>
        </a></div>
      <ul>
      <li class="nav-section">
        </li><li><a href="../../guide/topics/graphics/overview.html">
            <span class="en">概述</span>
          </a></li>
        <li><a href="../../guide/topics/graphics/prop-animation.html">
            <span class="en">属性动画</span>
          </a></li>
        <li><a href="../../guide/topics/graphics/view-animation.html">
            <span class="en">补间动画</span>
          </a></li>
        <li><a href="../../guide/topics/graphics/drawable-animation.html">
            <span class="en">帧动画</span>
          </a></li>
        <li><a href="../../guide/topics/graphics/2d-graphics.html">
            <span class="en">画布与图形</span>
          </a></li>
        <li><a href="../../guide/topics/graphics/opengl.html">
            <span class="en">OpenGL ES</span>
          </a></li>
        <li><a href="../../guide/topics/graphics/hardware-accel.html">
            <span class="en">硬件加速</span>
          </a></li>
       </ul>
    </li><!-- end of graphics and animation-->

   <li class="nav-section">
            <div class="nav-section-header"><a href="../../guide/topics/renderscript/index.html">
              <span class="en">计算</span>
            </a></div>
            <ul>
              <li><a href="../../guide/topics/renderscript/compute.html">
                    <span class="en">RenderScript</span></a>
                  </li>

              <li><a href="../../guide/topics/renderscript/advanced.html">
                    <span class="en">RenderScript 进阶</span></a>
                  </li>
              <li><a href="../../guide/topics/renderscript/reference.html">
                    <span class="en">运行时 API 参考</span></a>
              </li>
             </ul>
   </li>
      <li class="nav-section">
          <div class="nav-section-header"><a href="../../guide/topics/media/index.html">
            <span class="en">多媒体与照相机</span>
          </a></div>
          <ul>
            <li><a href="../../guide/topics/media/mediaplayer.html">
                  <span class="en">多媒体播放</span></a>
                </li>
            <li><a href="../../guide/appendix/media-formats.html">
                   <span class="en">支持的多媒体格式</span></a>
                </li>
            <li><a href="../../guide/topics/media/audio-capture.html">
                  <span class="en">音频录制</span></a>
                </li>
            <li><a href="../../guide/topics/media/jetplayer.html">
                  <span class="en">JetPlayer</span></a>
                </li>
            <li><a href="../../guide/topics/media/camera.html">
                  <span class="en">照相机</span></a>
                </li>
          </ul>
      </li><!-- end of media and camera -->

      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/sensors/index.html">
              <span class="en">位置与传感器</span>
              </a></div>
        <ul>
          <li><a href="../../guide/topics/location/index.html">
               <span class="en">位置和地图</span>
             </a>
          </li><li><a href="../../guide/topics/location/strategies.html">
               <span class="en">位置策略</span>
             </a></li>
          <li><a href="../../guide/topics/sensors/sensors_overview.html">
              <span class="en">传感器概述</span>
            </a></li>
          <li><a href="../../guide/topics/sensors/sensors_motion.html">
              <span class="en">动作传感器</span>
            </a></li>
          <li><a href="../../guide/topics/sensors/sensors_position.html">
              <span class="en">位置传感器</span>
            </a></li>
          <li><a href="../../guide/topics/sensors/sensors_environment.html">
              <span class="en">环境传感器</span>
            </a></li>
        </ul>
      </li><!-- end of location and sensors -->



<li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/connectivity/index.html">
               <span class="en">连接性</span>
             </a></div>
        <ul>
          <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/connectivity/bluetooth.html">
          <span class="en">蓝牙</span></a>
        </div>
        <ul>
          <li><a href="../../guide/topics/connectivity/bluetooth-le.html">低功耗蓝牙</a></li>
        </ul>
      </li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/connectivity/nfc/index.html">
          <span class="en">NFC</span></a>
        </div>
        <ul>
          <li><a href="../../guide/topics/connectivity/nfc/nfc.html">NFC 基础</a></li>
          <li><a href="../../guide/topics/connectivity/nfc/advanced-nfc.html">高级 NFC</a></li>
          <li><a href="../../guide/topics/connectivity/nfc/hce.html">Host-based Card Emulation</a></li>
        </ul>
      </li>
      <li><a href="../../guide/topics/connectivity/wifip2p.html">
            <span class="en">Wi-Fi P2P</span></a>
          </li>
      <li class="nav-section">
          <div class="nav-section-header"><a href="../../guide/topics/connectivity/usb/index.html">
            <span class="en">USB</span></a>
          </div>
            <ul>
              <li><a href="../../guide/topics/connectivity/usb/accessory.html">附件</a></li>
              <li><a href="../../guide/topics/connectivity/usb/host.html">主机</a></li>
            </ul>
     </li>
     <li><a href="../../guide/topics/connectivity/sip.html">
            <span class="en">SIP</span>
          </a>
     </li>

    </ul>
  </li><!-- end of connectivity -->


      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/topics/text/index.html">
            <span class="en">文本与输入</span>
        </a></div>
        <ul>
          <li><a href="../../guide/topics/text/copy-paste.html">
              <span class="en">复制和粘贴</span>
            </a></li>
          <li><a href="../../guide/topics/text/creating-input-method.html">
              <span class="en">创建输入法引擎</span>
            </a></li>
          <li><a href="../../guide/topics/text/spell-checker-framework.html">
              <span class="en">拼写检查</span>
            </a></li>
        </ul>
      </li><!-- end of text and input -->

     <li class="nav-section">
      <div class="nav-section-header"><a href="../../guide/topics/data/index.html">
          <span class="en">数据存储</span>
        </a></div>
      <ul>
         <li><a href="../../guide/topics/data/data-storage.html">
            <span class="en">存储选项</span>
           </a></li>
        <li><a href="../../guide/topics/data/backup.html">
            <span class="en">数据备份</span>
          </a></li>
        <li><a href="../../guide/topics/data/install-location.html">
            <span class="en">应用安装位置</span>
          </a></li>
      </ul>
    </li><!-- end of data storage -->


  <li class="nav-section">
           <div class="nav-section-header"><a href="../../guide/topics/admin/index.html">
               <span class="en">管理</span>
             </a></div>
           <ul>
              <li>
                <a href="../../guide/topics/admin/device-admin.html">
                <span class="en">设备管理</span></a>
              </li><!--
              <li>
                <a href="../../guide/topics/admin/keychain.html">
                <span class="en">Certificate Store</span></a>
              </li>
            -->
            
           </ul>
  </li><!-- end of administration -->

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../guide/webapps/index.html">
    <span class="en">Web 应用</span>
    </a></div>
    <ul>
      <li><a href="../../guide/webapps/overview.html">
            <span class="en">概述</span>
          </a></li>
      <li><a href="../../guide/webapps/targeting.html">
            <span class="en">Web 应用的目标屏幕</span>
          </a></li>
      <li><a href="../../guide/webapps/webview.html">
            <span class="en">在 WebView 中创建 Web 应用</span>
          </a></li>
      <li><a href="../../guide/webapps/migrating.html">
            <span class="en">迁移到 Android 4.4 版本的 WebView</span>
          </a></li>
      <li><a href="../../guide/webapps/debugging.html">
            <span class="en">Web 应用调试</span>
          </a></li>
      <li><a href="../../guide/webapps/best-practices.html">
            <span class="en">Web 应用的最佳实践</span>
          </a></li>
    </ul>
  </li><!-- end of web apps -->

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../guide/practices/index.html">
      <span class="en">最佳实践</span> <span class="de" style="display:none">Bewährte Verfahren</span> <span class="es" style="display:none">Prácticas recomendadas</span> <span class="fr" style="display:none">Meilleures pratiques</span> <span class="it" style="display:none">Best practice</span> <span class="ja" style="display:none">ベスト プラクティス</span> <span class="zh-cn" style="display:none">最佳实践</span> <span class="zh-tw" style="display:none">最佳實務</span>
    </a></div></a>
    <ul>
      <li><a href="../../guide/practices/compatibility.html">
            <span class="en">兼容性</span>
          </a></li>
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/practices/screens_support.html">
          <span class="en">支持多个屏幕</span>
        </a></div>
        <ul>
          <li><a href="../../guide/practices/screens-distribution.html">
            <span class="en">分发给特定的屏幕</span>
          </a></li>
          <li><a href="../../guide/practices/screen-compat-mode.html">
            <span class="en">屏幕兼容性模式</span>
          </a></li>
        </ul>
      </li>
      <li><a href="../../guide/practices/tablets-and-handsets.html">
            <span class="en">支持平板设备和手持设备</span>
          </a></li>

    </ul>
  </li><!-- this needs to move
      <li class="nav-section">
        <div class="nav-section-header"><a href="../../guide/practices/ui_guidelines/index.html">
               <span class="en">UI Guidelines</span>
             </a></div>
        <ul>
          <li class="nav-section">
            <div class="nav-section-header"><a href="../../guide/practices/ui_guidelines/icon_design.html">
                   <span class="en">Icon Design</span>
                 </a></div>
            <ul>
              <li><a href="../../guide/practices/ui_guidelines/icon_design_launcher.html">
                    <span class="en">Launcher Icons</span>
                  </a></li>
              <li><a href="../../guide/practices/ui_guidelines/icon_design_menu.html">
                    <span class="en">Menu Icons</span>
                  </a></li>
              <li><a href="../../guide/practices/ui_guidelines/icon_design_action_bar.html">
                    <span class="en">Action Bar Icons</span>
                  </a></li>
              <li><a href="../../guide/practices/ui_guidelines/icon_design_status_bar.html">
                    <span class="en">Status Bar Icons</span>
                  </a></li>
              <li><a href="../../guide/practices/ui_guidelines/icon_design_tab.html">
                    <span class="en">Tab Icons</span>
                  </a></li>
              <li><a href="../../guide/practices/ui_guidelines/icon_design_dialog.html">
                    <span class="en">Dialog Icons</span>
                  </a></li>
              <li><a href="../../guide/practices/ui_guidelines/icon_design_list.html">
                    <span class="en">List View Icons</span>
                  </a></li>
            </ul>
          </li>
          <li><div><a href="../../guide/practices/ui_guidelines/widget_design.html">
                <span class="en">App Widget Design</span>
              </a></div>
          </li>
        </ul>
      </li>
        </ul> --><!-- Remove
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../guide/appendix/index.html">
        <span class="en">Appendix</span>
        <span class="de" style="display:none">Anhang</span>
        <span class="es" style="display:none">Apéndice</span>
        <span class="fr" style="display:none">Annexes</span>
        <span class="it" style="display:none">Appendice</span>
        <span class="ja" style="display:none">付録</span>
        <span class="zh-cn" style="display:none">附录</span>
        <span class="zh-tw" style="display:none">附錄</span>
      </a></div>
    <ul>
      <li><a href="../../guide/appendix/g-app-intents.html">
            <span class="en">Intents List: Google Apps</span>
          </a></li>


      <li><a href="../../guide/appendix/glossary.html">
            <span class="en">Glossary</span>
          </a></li>
    </ul>
  </li>

</li>
-->

      


</ul>


<script type="text/javascript">
<!--
    buildToggleLists();
    changeNavLang(getLangPref());
//-->
</script>


        

      </div>
    </div><!-- end side-nav --> 
    <script>
      $(document).ready(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>




<div class="col-12" id="doc-col" >


  
    
      
        <h1 itemprop="name" >加载器</h1>
      
    
  


  
  <div id="jd-content">


    <div class="jd-descr" itemprop="articleBody">
    <div id="qv-wrapper">
<div id="qv">
    <h2>在本文档中</h2>
    <ol>
    <li><a href="#summary">加载器 API 摘要</a></li>
    <li><a href="#app">在应用中使用加载器</a>
      <ol>
        <li><a href="#requirements"></a></li>
        <li><a href="#starting">启动加载器</a></li>
        <li><a href="#restarting">重启动加载器</a></li>
        <li><a href="#callback">使用加载管理器回调方法</a></li>
      </ol>
    </li>
    <li><a href="#example">例子</a>
       <ol>
         <li><a href="#more_examples">更多例子</a></li>
        </ol>
    </li>
  </ol>
    
  <h2>关键类</h2>
    <ol>
      <li><code><a href="../../reference/android/app/LoaderManager.html">LoaderManager</a></code></li>
      <li><code><a href="../../reference/android/content/Loader.html">Loader</a></code></li>

    </ol>   
    
    <h2>相关示例</h2>
   <ol>
     <li> <a
href="../../resources/samples/ApiDemos/src/com/example/android/apis/app/LoaderCursor.html">

LoaderCursor</a></li>
     <li> <a
href="../../resources/samples/ApiDemos/src/com/example/android/apis/app/LoaderThrottle.html">

LoaderThrottle</a></li>
   </ol>
  </div>
</div>

<p>自 Android 3.0 中引入，加载器让活动组件及活动片段中异步加载数据变得容易。加载器有以下特征：</p>
  <ul>
    <li>可以在每个<code><a href="../../reference/android/app/Activity.html">活动组件</a></code>和<code><a href="../../reference/android/app/Fragment.html">活动片段</a></code>中访问。</li>
    <li>提供异步数据加载能力。</li>
    <li>监视数据源并在内容改变时传递新的结果。</li>
    <li>当配置改变后重新创建时自动重连接上一个加载器的游标。也就是它不需要重新查询数据。</li>
  </ul>
 
<h2 id="summary">加载器 API 摘要</h2>

<p>在应用中使用加载器涉及多个类和接口。它们总结在下面的表格中：</p>

<table>
  <tr>
    <th>类/接口</th>
    <th>描述</th>
  </tr>
  <tr>
    <td><code><a href="../../reference/android/app/LoaderManager.html">LoaderManager</a></code></td>
    <td>一个抽象类，它同<code><a href="../../reference/android/app/Activity.html">活动组件</a></code>或者<code><a href="../../reference/android/app/Fragment.html">活动片段</a></code>关联来管理一个或多个<code><a href="../../reference/android/content/Loader.html">加载器</a></code>实例。它帮助应用管理长运行操作来同<code><a href="../../reference/android/app/Activity.html">活动组件</a></code>或<code><a href="../../reference/android/app/Fragment.html">活动片段</a></code>生命周期结合；它最常与<code><a href="../../reference/android/content/CursorLoader.html">游标加载器</a></code>一起使用，但是应用可以编写自己的加载器来管理其它类型的数据。<br /><br />每个活动组件或活动片段只能有一个<code><a href="../../reference/android/app/LoaderManager.html">加载管理器</a></code>。但是一个<code><a href="../../reference/android/app/LoaderManager.html">加载管理器</a></code>可以有多个加载器。</td>
  </tr>
  <tr>
    <td><code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code></td>
    <td>一个回调接口用于客户端同<code><a href="../../reference/android/app/LoaderManager.html">加载管理器</a></code>交互。例如，你使用 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html#onCreateLoader(int, android.os.Bundle)">onCreateLoader()</a></code> 回调方法来创建一个新的加载器。</td>
  </tr>
  <tr>
    <td><code><a href="../../reference/android/content/Loader.html">Loader</a></code></td>
    <td>一个抽象类来执行数据异步加载。他是加载器的基类。你一般会使用<code><a href="../../reference/android/content/CursorLoader.html">游标加载器</a></code>，但你可以实现自己的子类。当加载器可用，它们会监视数据源并当内容改变时传递新的结果。 </td>
  </tr>
  <tr>
    <td><code><a href="../../reference/android/content/AsyncTaskLoader.html">AsyncTaskLoader</a></code></td>
    <td>抽象加载器，它提供一个<code><a href="../../reference/android/os/AsyncTask.html">异步任务</a></code>来完成工作。</td>
  </tr>
  <tr>
    <td><code><a href="../../reference/android/content/CursorLoader.html">CursorLoader</a></code></td>
    <td>一个<code><a href="../../reference/android/content/AsyncTaskLoader.html">异步任务加载器</a></code>子类，它查询<code><a href="../../reference/android/content/ContentResolver.html">内容解析器</a></code>并传回<code><a href="../../reference/android/database/Cursor.html">游标</a></code>。这个类实现<code><a href="../../reference/android/content/Loader.html">加载器</a></code>协议来查询游标，构建于<code><a href="../../reference/android/content/AsyncTaskLoader.html">异步任务加载器</a></code>来在后台线程执行游标查询，这样它不会阻塞应用的用户界面。相比于在活动片段或活动组件 API 中执行托管的查询操作， 使用加载器从<code><a href="../../reference/android/content/ContentProvider.html">内容提供器</a></code>中异步加载数据是最佳方法。</td>
  </tr>
</table>

<p>上面表格中的类和接口都是你在应用中用来实现加载器的关键组件。你不需要你创建的每一个加载器全部功能，但你总需要一个<code><a href="../../reference/android/app/LoaderManager.html">加载管理器</a></code>的引用来初始化加载器及 <code><a href="../../reference/android/content/Loader.html">Loader</a></code> 类的实现，如 <code><a href="../../reference/android/content/CursorLoader.html">CursorLoader</a></code> 类。下面的小节显示你如何在应用中使用这些类和接口。</p>

<h2 id ="app">在应用中使用加载器</h2>
<p>本节描述如何在安卓应用中使用加载器。使用加载器的应用通常包括这些部分：</p>
<ul>
  <li><code><a href="../../reference/android/app/Activity.html">活动组件</a></code>或是<code><a href="../../reference/android/app/Fragment.html">活动片段</a></code>。</li>
  <li><code><a href="../../reference/android/app/LoaderManager.html">加载管理器</a></code>的实例。</li>
  <li><code><a href="../../reference/android/content/CursorLoader.html">游标加载器</a></code>来加载由<code><a href="../../reference/android/content/ContentProvider.html">内容提供器</a></code>后台提供的数据。有时你可以实现你自己的 <code><a href="../../reference/android/content/Loader.html">Loader</a></code> 子类或 <code><a href="../../reference/android/content/AsyncTaskLoader.html">AsyncTaskLoader</a></code> 来从其他数据源加载数据。</li>
  <li><code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code> 接口的实现。在这里你创建新的加载器以及管理现存的加载器引用。</li> 
<li>显示加载器数据的方法，如 <code><a href="../../reference/android/widget/SimpleCursorAdapter.html">SimpleCursorAdapter</a></code>。</li>
  <li>数据源，如当使用<code><a href="../../reference/android/content/CursorLoader.html">游标加载器</a></code>时使用的<code><a href="../../reference/android/content/ContentProvider.html">内容提供器</a></code>。</li>
</ul>
<h3 id="starting">启动加载器</h3>

<p><code><a href="../../reference/android/app/LoaderManager.html">加载管理器</a></code>在<code><a href="../../reference/android/app/Activity.html">活动组件</a></code>或<code><a href="../../reference/android/app/Fragment.html">活动片段</a></code>中管理一个或多个<code><a href="../../reference/android/content/Loader.html">加载器</a></code>实例。每个活动组件或活动片段中只有一个<code><a href="../../reference/android/app/LoaderManager.html">加载管理器</a></code>。</p> 

<p>一般在活动组件的 <code><a href="../../reference/android/app/Activity.html#onCreate(android.os.Bundle)">onCreate()</a></code> 方法中或在活动片段的 <code><a href="../../reference/android/app/Fragment.html#onActivityCreated(android.os.Bundle)">onActivityCreated()</a></code> 方法中初始化一个<code><a href="../../reference/android/content/Loader.html">加载器</a></code>。你像这样初始化加载器：</p>

<pre>// Prepare the loader.  Either re-connect with an existing one,
// or start a new one.
getLoaderManager().initLoader(0, null, this);</pre>

<p><code><a href="../../reference/android/app/LoaderManager.html#initLoader(int, android.os.Bundle, android.app.LoaderManager.LoaderCallbacks<D>)">initLoader()</a></code> 方法能传入下列参数：</p>
<ul>
  <li>一个唯一的 ID 来识别加载器。在这个例子中，ID 是 0。</li>
<li>可选的参数来在构造时提供给加载器（在本例中为 <code>null</code>）。</li> 

<li><code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code> 接口实现，<code><a href="../../reference/android/app/LoaderManager.html">LoaderManager</a></code> 调用它来报告加载器事件。在本例中，本地类实现了 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code> 接口，所以它传入了一个自引用，<code>this</code>。</li> 
</ul>
<p><code><a href="../../reference/android/app/LoaderManager.html#initLoader(int, android.os.Bundle, android.app.LoaderManager.LoaderCallbacks<D>)">initLoader()</a></code> 方法确保加载器已初始化并且启用。它有两个可能的结果：</p>
<ul>
  <li>如果由 ID 指定的加载器已经存在，那么重用那个最后被创建的加载器。</li>
  <li>如果指定 ID 的加载器<em>不</em>存在，那么 <code><a href="../../reference/android/app/LoaderManager.html#initLoader(int, android.os.Bundle, android.app.LoaderManager.LoaderCallbacks<D>)">initLoader()</a></code> 会触发 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code> 接口的 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html#onCreateLoader(int, android.os.Bundle)">onCreateLoader()</a></code> 方法。这是你实现代码来实例化并返回一个新加载器的地方。更多讨论，参见 <a
href="#onCreateLoader">onCreateLoader</a> 小节。</li>
</ul>
<p>在任一情况下，给定的 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code> 实现会与加载器相关联，并会在加载器状态改变时被调用。如果这时调用者已经在已启动状态，并且请求的加载器已经存在还生成了数据，那么系统会立即调用 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html#onLoadFinished(android.content.Loader<D>, D)">onLoadFinished()</a></code> 方法（当调用 <code><a href="../../reference/android/app/LoaderManager.html#initLoader(int, android.os.Bundle, android.app.LoaderManager.LoaderCallbacks<D>)">initLoader()</a></code> 时），所以你必须对这种情况有所准备。参见 <a href="#onLoadFinished"> onLoadFinished</a> 来活动关于这个回调方法的更多讨论</p>

<p>注意 <code><a href="../../reference/android/app/LoaderManager.html#initLoader(int, android.os.Bundle, android.app.LoaderManager.LoaderCallbacks<D>)">initLoader()</a></code> 方法返回创建的<code><a href="../../reference/android/content/Loader.html">加载器</a></code>，但是你不需要保存对它的引用。<code><a href="../../reference/android/app/LoaderManager.html">LoaderManager</a></code> 自动管理加载器的生命。<code><a href="../../reference/android/app/LoaderManager.html">LoaderManager</a></code> 在必要的时候启动和结束，并且维护加载器的状态和它相关的内容。这意味着你只在极少数情况下需要直接和加载器交互（查看 <a href="../../resources/samples/ApiDemos/src/com/example/android/apis/app/LoaderThrottle.html"> LoaderThrottle</a> 例子来了解如何使用加载器方法来精调加载器行为）。你最长使用的是 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code> 接口方法来在特定事件发生时介入加载流程。更多相关话题的讨论，查看<a
href="#callback">使用加载管理器回调方法</a>。</p>

<h3 id="restarting">重启动加载器</h3>

<p>当你使用 <code><a href="../../reference/android/app/LoaderManager.html#initLoader(int, android.os.Bundle, android.app.LoaderManager.LoaderCallbacks<D>)">initLoader()</a></code> 方法时，如上所述，如果存在一个带特定 ID 的加载器，那么它使用这个既有的加载器。如果不存在这个加载器，那么创建一个新的加载器。但是有时候你想要舍弃旧的数据并重新开始。</p>

<p>要抛弃旧数据，你可以使用 <code><a href="../../reference/android/app/LoaderManager.html#restartLoader(int, android.os.Bundle, android.app.LoaderManager.LoaderCallbacks<D>)">restartLoader()</a></code> 方法。例如，这个 <code><a href="../../reference/android/widget/SearchView.OnQueryTextListener.html">SearchView.OnQueryTextListener</a></code> 实现中当用户查询改变时重启加载器。加载器需要重启来让它可以使用修改过的搜索过滤器来做新的查询：</p>

<pre>
public boolean onQueryTextChanged(String newText) {
    // Called when the action bar search text has changed.  Update
    // the search filter, and restart the loader to do a new query
    // with this filter.
    mCurFilter = !TextUtils.isEmpty(newText) ?newText : null;
    getLoaderManager().restartLoader(0, null, this);
    return true;
}</pre>

<h3 id="callback">使用加载管理器回调方法</h3>

<p><code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code> is a callback interface
that lets a client  interact with the <code><a href="../../reference/android/app/LoaderManager.html">LoaderManager</a></code>.  </p>
<p>加载器，特别是 <code><a href="../../reference/android/content/CursorLoader.html">CursorLoader</a></code>，希望在停止后保留它们的数据。这让应用能在活动组件或者活动片段的 <code><a href="../../reference/android/app/Activity.html#onStop()">onStop()</a></code> 方法和 <code><a href="../../reference/android/app/Activity.html#onStart()">onStart()</a></code> 方法间能够保持他们的数据，这样当用户返回应用时，他们不需要等待数据重新加载。你在需要创建新加载器以及引用停止使用加载器数据时使用 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code>接口的方法。</p>

<p><code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code> 包括下面这些方法：</p>
<ul>
  <li><code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html#onCreateLoader(int, android.os.Bundle)">onCreateLoader()</a></code> — 实例化并返回由给定 ID 创建的新<code><a href="../../reference/android/content/Loader.html">加载器</a></code>。
</li></ul>
<ul>
  <li> <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html#onLoadFinished(android.content.Loader<D>, D)">onLoadFinished()</a></code> — 当之前创建的加载器完成加载时被调用。
</li></ul>
<ul>
  <li><code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html#onLoaderReset(android.content.Loader<D>)">onLoaderReset()</a></code> — 当之前创建的加载器被重置时被调用，这时数据不可用。
</li>
</ul>
<p>这些方法会在下面更详细的讨论。</p>

<h4 id ="onCreateLoader">onCreateLoader</h4>

<p>当你尝试访问一个加载器（例如通过 <code><a href="../../reference/android/app/LoaderManager.html#initLoader(int, android.os.Bundle, android.app.LoaderManager.LoaderCallbacks<D>)">initLoader()</a></code> 方法），它手下你检查指定 ID 的加载器是否存在。如果不存在，它会触发 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html">LoaderManager.LoaderCallbacks</a></code> 接口的 <code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html#onCreateLoader(int, android.os.Bundle)">onCreateLoader()</a></code> 方法。在这个方法中，你可以创建一个新的加载器。通常这是一个 <code><a href="../../reference/android/content/CursorLoader.html">CursorLoader</a></code> ，但是你可以实现自己的 <code><a href="../../reference/android/content/Loader.html">Loader</a></code> 子类。 </p>

<p>在本例中，<code><a href="../../reference/android/app/LoaderManager.LoaderCallbacks.html#onCreateLoader(int, android.os.Bundle)">onCreateLoader()</a></code> 回调方法创建一个 <code><a href="../../reference/android/content/CursorLoader.html">CursorLoader</a></code>。你必须是用构造函数来构建 <code><a href="../../reference/android/content/CursorLoader.html">CursorLoader</a></code>，它需要完整的信息来执行对 <code><a href="../../reference/android/content/ContentProvider.html">ContentProvider</a></code> 的查询。具体来说，它需要：</p>
<ul>
  <li><em>uri</em> — 获取内容的 URI。 </li>
  <li><em>projection</em> — 返回的字段列表。如果要返回所有字段，传入 <code>null</code>，但比较低效率。 </li>
  <li><em>selection</em> — 声明哪些行返回的过滤器，格式化成 SQL WHERE 子句（不包含 WHERE 关键字）。如果要返回指定 URI 的所有行，传入 <code>null</code>。 </li>
  <li><em>selectionArgs</em> — 你可以在 selection 参数中包括 ？ 字符，它会按照 ？ 字符出现的顺序依次替换成 <em>selectionArgs</em> 参数中的值。这些值会被作为字符串绑定。 </li>
  <li><em>sortOrder</em> — 返回的行如何排序，格式化为 SQL ORDER BY 子句（不包括 ORDER BY 关键字）。如果要使用默认排序，传入 <code>null</code> 值，结果可能是无序的。</li>
</ul>
<p>例如：</p>
<pre>
 // If non-null, this is the current filter the user has provided.
String mCurFilter;
...
public Loader&lt;Cursor&gt; onCreateLoader(int id, Bundle args) {
    // This is called when a new Loader needs to be created. &nbsp;This
    // sample only has one Loader, so we don't care about the ID.
    // First, pick the base URI to use depending on whether we are
    // currently filtering.
    Uri baseUri;
&nbsp; &nbsp; if (mCurFilter != null) {
&nbsp; &nbsp; &nbsp; &nbsp; baseUri = Uri.withAppendedPath(Contacts.CONTENT_FILTER_URI,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;   Uri.encode(mCurFilter));
&nbsp; &nbsp; } else {
&nbsp; &nbsp; &nbsp; &nbsp; baseUri = Contacts.CONTENT_URI;
&nbsp; &nbsp; }

&nbsp; &nbsp; // Now create and return a CursorLoader that will take care of
&nbsp; &nbsp; // creating a Cursor for the data being displayed.
&nbsp; &nbsp; String select = "((" + Contacts.DISPLAY_NAME + " NOTNULL) AND ("
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + Contacts.HAS_PHONE_NUMBER + "=1) AND ("
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + Contacts.DISPLAY_NAME + " != '' ))";
&nbsp; &nbsp; return new CursorLoader(getActivity(), baseUri,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CONTACTS_SUMMARY_PROJECTION, select, null,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");
}</pre>
<h4 id="onLoadFinished">onLoadFinished</h4>

<p>当之前创建的加载器加载完成时这个方法被调用。This method is guaranteed to be called prior to the release of the last data that was supplied for this loader. At this point you should remove all use of the old data (since it will be released soon), but should not do your own release of the data since its loader owns it and will take care of that.</p>


<p>The loader will release the data once it knows the application is no longer using it. For example, if the data is a cursor from a <code><a href="../../reference/android/content/CursorLoader.html">CursorLoader</a></code>, you should not call <code><a href="../../reference/android/database/Cursor.html#close()">close()</a></code> on it yourself. If the cursor is being placed in a <code><a href="../../reference/android/widget/CursorAdapter.html">CursorAdapter</a></code>, you should use the <code><a href="../../reference/android/widget/SimpleCursorAdapter.html#swapCursor(android.database.Cursor)">swapCursor()</a></code> method so that the old <code><a href="../../reference/android/database/Cursor.html">Cursor</a></code> is not closed. 例如：</p>

<pre>
// This is the Adapter being used to display the list's data.<br
/>SimpleCursorAdapter mAdapter;
...

public void onLoadFinished(Loader&lt;Cursor&gt; loader, Cursor data) {
    // Swap the new cursor in. &nbsp;(The framework will take care of closing the
    // old cursor once we return.)
    mAdapter.swapCursor(data);
}</pre>

<h4 id="onLoaderReset">onLoaderReset</h4>

<p>This method is called when a previously created loader is being reset,  thus 
making its data unavailable. This callback lets you find  out when the data is
about to be released so you can remove your  reference to it. &nbsp;</p>
<p>This implementation calls 
<code><a href="../../reference/android/widget/SimpleCursorAdapter.html#swapCursor(android.database.Cursor)">swapCursor()</a></code>  
with a value of <code>null</code>:</p>

<pre>
// This is the Adapter being used to display the list's data.
SimpleCursorAdapter mAdapter;
...

public void onLoaderReset(Loader&lt;Cursor&gt; loader) {
    // This is called when the last Cursor provided to onLoadFinished()
    // above is about to be closed. &nbsp;We need to make sure we are no
    // longer using it.
    mAdapter.swapCursor(null);
}</pre>


<h2 id="example">例子</h2>

<p>As an example, here is the full implementation of a <code><a href="../../reference/android/app/Fragment.html">Fragment</a></code> that displays a <code><a href="../../reference/android/widget/ListView.html">ListView</a></code> containing
the results of a query against the contacts content provider. It uses a <code><a href="../../reference/android/content/CursorLoader.html">CursorLoader</a></code> to manage the query on the provider.</p>
 
<p>For an application to access a user's contacts, as shown in this example, its
manifest must include the permission
<code><a href="../../reference/android/Manifest.permission.html#READ_CONTACTS">READ_CONTACTS</a></code>.</p>

<pre>
public static class CursorLoaderListFragment extends ListFragment
&nbsp; &nbsp; &nbsp; &nbsp; implements OnQueryTextListener, LoaderManager.LoaderCallbacks&lt;Cursor&gt; {

    // This is the Adapter being used to display the list's data.
&nbsp; &nbsp; SimpleCursorAdapter mAdapter;

&nbsp; &nbsp; // If non-null, this is the current filter the user has provided.
&nbsp; &nbsp; String mCurFilter;

&nbsp; &nbsp; @Override public void onActivityCreated(Bundle savedInstanceState) {
&nbsp; &nbsp; &nbsp; &nbsp; super.onActivityCreated(savedInstanceState);

&nbsp; &nbsp; &nbsp; &nbsp; // Give some text to display if there is no data. &nbsp;In a real
&nbsp; &nbsp; &nbsp; &nbsp; // application this would come from a resource.
&nbsp; &nbsp; &nbsp; &nbsp; setEmptyText("No phone numbers");

&nbsp; &nbsp; &nbsp; &nbsp; // We have a menu item to show in action bar.
&nbsp; &nbsp; &nbsp; &nbsp; setHasOptionsMenu(true);

&nbsp; &nbsp; &nbsp; &nbsp; // Create an empty adapter we will use to display the loaded data.
&nbsp; &nbsp; &nbsp; &nbsp; mAdapter = new SimpleCursorAdapter(getActivity(),
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; android.R.layout.simple_list_item_2, null,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new String[] { Contacts.DISPLAY_NAME, Contacts.CONTACT_STATUS },
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; new int[] { android.R.id.text1, android.R.id.text2 }, 0);
&nbsp; &nbsp; &nbsp; &nbsp; setListAdapter(mAdapter);

&nbsp; &nbsp; &nbsp; &nbsp; // Prepare the loader. &nbsp;Either re-connect with an existing one,
&nbsp; &nbsp; &nbsp; &nbsp; // or start a new one.
&nbsp; &nbsp; &nbsp; &nbsp; getLoaderManager().initLoader(0, null, this);
&nbsp; &nbsp; }

&nbsp; &nbsp; @Override public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
&nbsp; &nbsp; &nbsp; &nbsp; // Place an action bar item for searching.
&nbsp; &nbsp; &nbsp; &nbsp; MenuItem item = menu.add("Search");
&nbsp; &nbsp; &nbsp; &nbsp; item.setIcon(android.R.drawable.ic_menu_search);
&nbsp; &nbsp; &nbsp; &nbsp; item.setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
&nbsp; &nbsp; &nbsp; &nbsp; SearchView sv = new SearchView(getActivity());
&nbsp; &nbsp; &nbsp; &nbsp; sv.setOnQueryTextListener(this);
&nbsp; &nbsp; &nbsp; &nbsp; item.setActionView(sv);
&nbsp; &nbsp; }

&nbsp; &nbsp; public boolean onQueryTextChange(String newText) {
&nbsp; &nbsp; &nbsp; &nbsp; // Called when the action bar search text has changed. &nbsp;Update
&nbsp; &nbsp; &nbsp; &nbsp; // the search filter, and restart the loader to do a new query
&nbsp; &nbsp; &nbsp; &nbsp; // with this filter.
&nbsp; &nbsp; &nbsp; &nbsp; mCurFilter = !TextUtils.isEmpty(newText) ? newText : null;
&nbsp; &nbsp; &nbsp; &nbsp; getLoaderManager().restartLoader(0, null, this);
&nbsp; &nbsp; &nbsp; &nbsp; return true;
&nbsp; &nbsp; }

&nbsp; &nbsp; @Override public boolean onQueryTextSubmit(String query) {
&nbsp; &nbsp; &nbsp; &nbsp; // Don't care about this.
&nbsp; &nbsp; &nbsp; &nbsp; return true;
&nbsp; &nbsp; }

&nbsp; &nbsp; @Override public void onListItemClick(ListView l, View v, int position, long id) {
&nbsp; &nbsp; &nbsp; &nbsp; // Insert desired behavior here.
&nbsp; &nbsp; &nbsp; &nbsp; Log.i("FragmentComplexList", "Item clicked: " + id);
&nbsp; &nbsp; }

&nbsp; &nbsp; // These are the Contacts rows that we will retrieve.
&nbsp; &nbsp; static final String[] CONTACTS_SUMMARY_PROJECTION = new String[] {
&nbsp; &nbsp; &nbsp; &nbsp; Contacts._ID,
&nbsp; &nbsp; &nbsp; &nbsp; Contacts.DISPLAY_NAME,
&nbsp; &nbsp; &nbsp; &nbsp; Contacts.CONTACT_STATUS,
&nbsp; &nbsp; &nbsp; &nbsp; Contacts.CONTACT_PRESENCE,
&nbsp; &nbsp; &nbsp; &nbsp; Contacts.PHOTO_ID,
&nbsp; &nbsp; &nbsp; &nbsp; Contacts.LOOKUP_KEY,
&nbsp; &nbsp; };
&nbsp; &nbsp; public Loader&lt;Cursor&gt; onCreateLoader(int id, Bundle args) {
&nbsp; &nbsp; &nbsp; &nbsp; // This is called when a new Loader needs to be created. &nbsp;This
&nbsp; &nbsp; &nbsp; &nbsp; // sample only has one Loader, so we don't care about the ID.
&nbsp; &nbsp; &nbsp; &nbsp; // First, pick the base URI to use depending on whether we are
&nbsp; &nbsp; &nbsp; &nbsp; // currently filtering.
&nbsp; &nbsp; &nbsp; &nbsp; Uri baseUri;
&nbsp; &nbsp; &nbsp; &nbsp; if (mCurFilter != null) {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; baseUri = Uri.withAppendedPath(Contacts.CONTENT_FILTER_URI,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Uri.encode(mCurFilter));
&nbsp; &nbsp; &nbsp; &nbsp; } else {
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; baseUri = Contacts.CONTENT_URI;
&nbsp; &nbsp; &nbsp; &nbsp; }

&nbsp; &nbsp; &nbsp; &nbsp; // Now create and return a CursorLoader that will take care of
&nbsp; &nbsp; &nbsp; &nbsp; // creating a Cursor for the data being displayed.
&nbsp; &nbsp; &nbsp; &nbsp; String select = "((" + Contacts.DISPLAY_NAME + " NOTNULL) AND ("
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + Contacts.HAS_PHONE_NUMBER + "=1) AND ("
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; + Contacts.DISPLAY_NAME + " != '' ))";
&nbsp; &nbsp; &nbsp; &nbsp; return new CursorLoader(getActivity(), baseUri,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; CONTACTS_SUMMARY_PROJECTION, select, null,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC");
&nbsp; &nbsp; }

&nbsp; &nbsp; public void onLoadFinished(Loader&lt;Cursor&gt; loader, Cursor data) {
&nbsp; &nbsp; &nbsp; &nbsp; // Swap the new cursor in. &nbsp;(The framework will take care of closing the
&nbsp; &nbsp; &nbsp; &nbsp; // old cursor once we return.)
&nbsp; &nbsp; &nbsp; &nbsp; mAdapter.swapCursor(data);
&nbsp; &nbsp; }

&nbsp; &nbsp; public void onLoaderReset(Loader&lt;Cursor&gt; loader) {
&nbsp; &nbsp; &nbsp; &nbsp; // This is called when the last Cursor provided to onLoadFinished()
&nbsp; &nbsp; &nbsp; &nbsp; // above is about to be closed. &nbsp;We need to make sure we are no
&nbsp; &nbsp; &nbsp; &nbsp; // longer using it.
&nbsp; &nbsp; &nbsp; &nbsp; mAdapter.swapCursor(null);
&nbsp; &nbsp; }
}</pre>
<h3 id="more_examples">更多例子</h3>

<p>There are a few different samples in <strong>ApiDemos</strong> that
illustrate how to use loaders:</p>
<ul>
  <li><a
href="../../resources/samples/ApiDemos/src/com/example/android/apis/app/LoaderCursor.html">
LoaderCursor</a> — A complete version of the
snippet shown above.</li>
  <li><a href="../../resources/samples/ApiDemos/src/com/example/android/apis/app/LoaderThrottle.html"> LoaderThrottle</a> — An example of how to use throttling to
reduce the number of queries a content provider does when its data changes.</li>
</ul>

<p>For information on downloading and installing the SDK samples, see <a
href="http://developer.android.com/resources/samples/get.html"> Getting the
Samples</a>.  </p>


    </div>
      
      <div class="content-footer layout-content-row" 
                    itemscope itemtype="http://schema.org/SiteNavigationElement">
        <div class="layout-content-col col-8" style="padding-top:4px">
          
            <div class="g-plusone" data-size="medium"></div>
          
        </div>
        
        <div class="paging-links layout-content-col col-4">
          
        </div>
        
      </div>
      
      
      

  </div><!-- end jd-content --> 

<div id="footer" class="wrap" >
        

  <div id="copyright">
    
  
    
  Except as noted, this content is 
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and 
  restrictions, see the <a href="../../license.html">Content 
  License</a>.
  
  </div>


  <div id="footerlinks">
    
  <p>
    <a href="../../about/index.html">About Android</a>&nbsp;&nbsp;|&nbsp;
    <a href="../../legal.html">Legal</a>&nbsp;&nbsp;|&nbsp;
    <a href="../../support.html">Support</a>
  </p>
  </div>

</div><!-- end footer --> 
</div><!-- end doc-content -->

</div><!-- end body-content -->  






</body>
</html>



